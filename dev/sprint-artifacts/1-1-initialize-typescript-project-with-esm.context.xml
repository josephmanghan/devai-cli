<story-context id="1-1-initialize-typescript-project-with-esm" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1</storyId>
    <title>Initialize TypeScript Project with ESM</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-28</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>dev/sprint-artifacts/1-1-initialize-typescript-project-with-esm.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>developer</asA>
    <iWant>a working TypeScript project with modern ESM configuration</iWant>
    <soThat>I have a solid foundation for building the CLI tool</soThat>
    <tasks>- Create package.json with ESM configuration (AC: 1)
  - Set "type": "module" for ESM support
  - Configure package metadata (name, version, description)
  - Add basic scripts (build, dev, typecheck)
  - Set Node.js engine constraint to >=20.0.0
- Create TypeScript configuration (AC: 2, 3)
  - Configure tsconfig.json with NodeNext module resolution
  - Set target to ES2022 and enable strict mode
  - Configure proper paths and output directory settings
- Install core dependencies (AC: 6)
  - Install TypeScript and @types/node
  - Install tsx for TypeScript execution in development
- Validate configuration (AC: 4, 5)
  - Run `tsc --noEmit` to verify configuration
  - Test basic scripts functionality
  - Ensure clean code standards compliance</tasks>
  </story>

  <acceptanceCriteria>1. Package.json created with "type": "module" and correct metadata
2. TypeScript configured with NodeNext resolution, ES2022 target, strict mode
3. tsconfig.json includes proper paths and module resolution settings
4. Project compiles successfully with `tsc --noEmit`
5. Basic package.json scripts: build, dev, typecheck
6. Code adheres to dev/styleguides/clean-code.md standards</acceptanceCriteria>

  <artifacts>
    <docs>
      <doc path="dev/architecture.md" title="Architecture Document" section="Technology Stack & ADR-002" snippet="ESM required by execa 9.x dependency, NodeNext module resolution, strict TypeScript mode, tsup for fast ESM bundling" />
      <doc path="dev/sprint-artifacts/tech-spec-epic-1.md" title="Epic 1 Technical Specification" section="Data Models and Contracts" snippet="Package.json contract with type: module, tsconfig.json with NodeNext resolution and ES2022 target" />
      <doc path="dev/prd.md" title="Product Requirements Document" section="Core Command" snippet="Package name: ollatool per PRD specification" />
      <doc path="dev/styleguides/nodejs-cli-setup-patterns.md" title="Node.js CLI Setup Patterns" section="Configuration" snippet="Modern ESM with TypeScript, tsup configuration, package.json structure" />
      <doc path="dev/styleguides/clean-code.md" title="Clean Code Standards" section="Function Size & Naming" snippet="Function size: maximum 15 lines, kebab-case file naming, camelCase variables" />
    </docs>
    <code>
      <!-- No existing code artifacts - this is the first foundation story -->
    </code>
    <dependencies>
      <node>
        <package name="typescript" version="^5.9.3" />
        <package name="@types/node" version="^24.10.1" />
        <package name="tsx" version="latest" />
        <package name="execa" version="^9.6.0" note="Already installed in Epic 0" />
        <package name="debug" version="^4.4.3" note="Already installed in Epic 0" />
        <package name="@types/debug" version="^4.1.12" note="Already installed in Epic 0" />
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint type="architecture">Must use ESM (type: "module") - required by execa 9.x dependency</constraint>
    <constraint type="configuration">NodeNext module resolution specified by ADR-002</constraint>
    <constraint type="naming">Package name must be "ollatool" per PRD</constraint>
    <constraint type="runtime">Node.js >=20.0.0 enforced via engines field</constraint>
    <constraint type="typeScript">Strict mode enabled for type safety</constraint>
    <constraint type="codeQuality">Must adhere to dev/styleguides/clean-code.md standards</constraint>
    <constraint type="fileNaming">Kebab-case for all files per architecture</constraint>
  </constraints>

  <interfaces>
    <!-- No interfaces for this configuration-only story -->
  </interfaces>

  <tests>
    <standards>Use Vitest framework from Epic 0 configuration. Co-located test pattern with *.test.ts files adjacent to source files. No tests needed for this configuration-only story - verification done through command-line validation.</standards>
    <locations>tests/ directory structure from Epic 0, co-located test files for future source code</locations>
    <ideas>
      <test idea="Validate package.json structure" ac="1,5" />
      <test idea="Run tsc --noEmit verification" ac="4" />
      <test idea="Test scripts functionality" ac="5" />
    </ideas>
  </tests>
</story-context>